name: CI

on: [push]

jobs:
          
  buildAndDeploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: docker://justinschaffranek/ngbuild  
    - run: |
        cd tst/frontend
        ls
        npm install
        ng build --prod --progress true:  
        ls                
    - run: |
        mkdir dist
        cd tst/frontend
        npm install
        npm install -g @angular/cli
        ng build --prod --progress true:  
        cd ../backend
        dotnet publish -c Release -o ../../dist
        cd ../../dist
        mkdir dummy
        
    - run: |
        cd dist
        pwd
        ls
        
        
        
